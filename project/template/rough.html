<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  max-width: 300px;
  margin: auto;
  text-align: center;
  font-family: arial;
}

.title {
  color: grey;
  font-size: 18px;
}

button {
  border: none;
  outline: 0;
  display: inline-block;
  padding: 8px;
  color: white;
  background-color: #000;
  text-align: center;
  cursor: pointer;
  width: 100%;
  font-size: 18px;
}

a {
  text-decoration: none;
  font-size: 22px;
  color: black;
}

button:hover, a:hover {
  opacity: 0.7;
}
</style>
</head>
<body>

<h2 style="text-align:center">User Profile Card</h2>

<div class="card">
  <img src="/w3images/team2.jpg" alt="John" style="width:100%">
  <h1>John Doe</h1>
  <p class="title">CEO & Founder, Example</p>
  <p>Harvard University</p>
  <div style="margin: 24px 0;">
    <a href="#"><i class="fa fa-dribbble"></i></a> 
    <a href="#"><i class="fa fa-twitter"></i></a>  
    <a href="#"><i class="fa fa-linkedin"></i></a>  
    <a href="#"><i class="fa fa-facebook"></i></a> 
  </div>
  <p>
    <a href="../upload">upload</p>
</div>

</body>
</html>



<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  max-width: 300px;
  margin: auto;
  text-align: center;
  font-family: arial;
}

.title {
  color: grey;
  font-size: 18px;
}

button {
  border: none;
  outline: 0;
  display: inline-block;
  padding: 8px;
  color: white;
  background-color: #000;
  text-align: center;
  cursor: pointer;
  width: 100%;
  font-size: 18px;
}

a {
  text-decoration: none;
  font-size: 22px;
  color: black;
}

button:hover, a:hover {
  opacity: 0.7;
}
</style>
</head>
<body>

<h2 style="text-align:center">User Profile Card</h2>

<div class="card">
  <img src="/w3images/team2.jpg" alt="John" style="width:100%">
  <h1>John Doe</h1>
  <p class="title">CEO & Founder, Example</p>
  <p>Harvard University</p>
  <div style="margin: 24px 0;">
    <a href="#"><i class="fa fa-dribbble"></i></a> 
    <a href="#"><i class="fa fa-twitter"></i></a>  
    <a href="#"><i class="fa fa-linkedin"></i></a>  
    <a href="#"><i class="fa fa-facebook"></i></a> 
  </div>
  
</div>
<div>
    <form action="" method="post">
        {% csrf_token %}
        <label for="">Email</label>
    <input type="emailfield"  name="Email" value="" placeholder="Enter your email"><br><br>
        <label for="">NAME</label>
    <input type="text"  name="name" value="" placeholder="Enter your name"><br><br>
        <label for="">age</label>
    <input type="number" name="age" value="" placeholder="Enter your age"><br><br>
        <label for="">Mark</label>
    <input type="number" name="mark" value="" placeholder="Enter your mark"><br><br>
        <label for=""></label>
    <input type="submit" value="submit" ><br>
    </form>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <!-- Brand/logo -->
  <a class="navbar-brand" href="#">
    <img src="static/phone-shop-logo-designs-modern-600w-2172716439.webp" alt="logo" style="width:40px;">
  </a>
  
  <!-- Links -->
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="../viewpro">view product</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../viewuser">view uder</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../bookinghistry">booking history</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../addpro">add product</a>
    </li>
  <form class="form-inline" action="/action_page.php">
    <input class="form-control mr-sm-2" type="text" placeholder="Search">
    <button class="btn btn-success" type="submit">Search</button>
  </form>
  <li class="nav-item">
    <a class="nav-link" href="#">log out</a>
  </li>
</ul>
</nav>

<div>
    <img src="static/221390155-secure-mobile_400.jpg" width="100%" height="100%">
 </div>

</body>
</html>



from django.shortcuts import render,redirect
from .models import *
from django.contrib import messages
from django.contrib.auth.models import User,auth

# Create your views here.

def login(req): 
    if 'user' in req.session:
        return redirect(userhome)

    if req.method=='POST':
        email1 = req.POST['Email']
        password = req.POST['password']
        try:
            data=Register.objects.get(Email=email1 ,password=password)
            req.session['user']=data.Email
            return redirect(userhome) 
        except:
            shop=auth.authenticate(username=email1 , password=password)
            if shop is not None:
                auth.login(req,shop)
                req.session['shop']=email1
                return redirect(adminhome)
            messages.warning(req, "details not available.")
    return render(req,'login.html')

def logout(req):
    if 'user' in req.session:
        del req.session['user']
    if 'shop' in req.session:
        del req.session
        auth.logout()
    return redirect(login)    

def register(req):
    if req.method=='POST':
        email1=req.POST['Email']
        name2=req.POST['name']
        phonenumber3=req.POST['phonenumber']
        location4=req.POST['location']
        password5=req.POST['password']
        try:
            data=Register.objects.create(Email=email1 , name=name2 , phonenumber=phonenumber3 ,location=location4 , password=password5 )
            data.save()
            return redirect(login)
        except:
            messages.warning(req, "Your account expires in three days.")
    return render(req,'register.html')

def userhome(req):
    return render(req,'userhome.html')

def adminhome(req):

    return render(req,'adminhome.html')

def profile(req):
    if 'user' in req.session:
        data=Register.objects.get(Email=req.session['user'])
        return render(req,'profile.html',{'data':data})
    else:
        return redirect(login)

def upload(req):
    if 'user' in req.session:
        data=Register.objects.get(Email=req.session['user'])
        if req.method=='POST':
            name=req.POST['name']
            phonenumber=req.POST['phonenumber']
            location=req.POST['location']
            Register.objects.filter(Email=req.session['user']).update(name=name ,phonenumber=phonenumber ,location=location)
            return redirect(profile)
        return render(req,'upload.html',{'data':data})
    else:
        return redirect(login)
    
    from django.shortcuts import render,redirect
from .models import *
from django.contrib import messages
from django.contrib.auth.models import User,auth
# Create your views here.

def get_usr(req):
    data=Register.objects.get(Email=req.session['user'])
    return data





def login(req):
    if 'user' in req.session:
        return redirect(userhome)

    if req.method=='POST':
        email=req.POST['Email']
        password=req.POST['password']
        try:
            data=Register.objects.get(Email=email,password=password)
            req.session['user']=data.Email
            return redirect(userhome)
        except:
            shop=auth.authenticate(username=email,password=password)
            if shop is not None:
                auth.login(req,shop)
                req.session['shop']=email

                return redirect(adminhome)


            messages.warning(req, "INVALID INPUT !")
    return render(req,'login.html')


def logout(req):
    if 'user' in req.session:
        # req.session.flush()
        del req.session['user']
    if 'shop' in req.session:
        del req.session
    return redirect(login)
def register(req):

    if req.method=='POST':
        name1=req.POST['name']
        email2=req.POST['email']
        phonenumber3=req.POST['phonenumber']
        location4=req.POST['location']
        password5=req.POST['password']
        try:
            data=Register.objects.create(name=name1,Email=email2,phonenumber=phonenumber3,location=location4,password=password5)
            data.save()
            return redirect(login)
        except:
            messages.warning(req, "Email Already Exits , Try Another Email.")
    return render(req,'register.html')

def userhome(req):
    if 'user' in req.session:
        return render(req,'userhome.html')
    else:
        return redirect(login)

def adminhome(req):
    
    return render(req,'adminhome.html')

###profile
def profile(req):
    if 'user' in req.session:
        # data=Register.objects.get(Email=req.session['user'])
        return render(req,'profile.html',{'data':get_usr(req)})
    else:
        return redirect(login)
    
###profile update
def upload(req):
    if 'user' in req.session:
        data=Register.objects.get(Email=req.session['user'])
        if req.method=='POST':
            name=req.POST['name']
            phonenumber=req.POST['phonenumber']
            location=req.POST['location']
            Register.objects.filter(Email=req.session['user']).update(name=name,phonenumber=phonenumber,location=location)
            return redirect(profile)
        return render(req,'upload.html',{'data':data})

    else:
       return redirect(login)